// VIP-Dream JS
var Class=function(){var a=function(){this.init.apply(this,arguments)};a.prototype.init=function(){};a.fn=a.prototype;a.fn.parent=a;a.extend=function(d){var b=d.extended;for(var c in d){a[c]=d[c]}if(b){b(a)}};a.include=function(d){var c=d.included;for(var b in d){a.fn[b]=d[b]}if(c){c(a)}};return a};var vip=new Class;vip.extend({Browser:{getScrollTop:function(){return document.body.scrollTop},getScrollLeft:function(){return document.body.scrollLeft},getScrollWidth:function(){return document.body.scrollWidth},getScrollHeight:function(){return document.body.scrollHeight},getClientWidth:function(){return document.documentElement.clientWidth},getClientHeight:function(){return document.documentElement.clientHeight}},Cookie:{get:function(b){var a=document.cookie.match(new RegExp("(^| )"+b+"=([^;]*)(;|$)"));if(a!=null){return unescape(a[2])}return null},set:function(a,c){var b=30;var d=new Date();d.setTime(d.getTime()+b*24*60*60*1000);document.cookie=a+"="+escape(c)+";expires="+d.toGMTString()},del:function(a){var c=new Date();c.setTime(c.getTime()-1);var b=getCookie(a);if(b!=null){document.cookie=a+"="+b+";expires="+c.toGMTString()}}},Url:{back:function(){var a=document.referrer;if(a){window.location.href=a}},getParam:function(e){var d=window.location.href.split("?");if(d.length>1){var b=d[1].split("&");for(var a=0;a<b.length;a++){var c=b[a].split("=");if(c[0]===e){return c[1]}}}},refresh:function(){window.location.href=window.location.href}},Valid:{isArray:function(a){return a instanceof Array},isDate:function(a){return/^(?:\d{4})-(?:0[1-9]|1[0-2])-(?:0[1-9]|[12][0-9]|3[01])$/.test(a)},isDateTime:function(a){return/^(?:\d{4})-(?:0[1-9]|1[0-2])-(?:0[1-9]|[12][0-9]|3[01])\s+([0-1]\d|2[0-3])\:[0-5]\d$/.test(a)},isDouble:function(a){if(/^[-\+]?\d+(\.\d+)?$/.test(a)){return true}else{return false}},isExist:function(a){if(a===undefined||a===null||a===""||a==={}||a.length<=0){return false}else{return true}},isFunction:function(a){if(typeof(a)==="function"){return true}else{return false}},isIDCard:function(a){if(/^\d{15}(\d{2}[A-Za-z0-9])?$/.test(a)){return true}else{return false}},isInteger:function(a){if(/^[-\+]?\d+$/.test(a)){return true}else{return false}},isMail:function(a){if(/^\w+([-+.]\w+)*@\w+([-.]\\w+)*\.\w+([-.]\w+)*$/.test(a)){return true}else{return false}},isMobile:function(a){if(/^13[0-9]{9}$|14[0-9]{9}|15[0-9]{9}$|17[0-9]{9}$|18[0-9]{9}$/.test(a)&&a.length===11){return true}else{return false}},isNumber:function(a){if(/^\d+$/.test(a)){return true}else{return false}},isPassword:function(a){if(!/^\d+$/.test(a)&&!/^[A-Za-z]+$/.test(a)){if(/[a-zA-Z0-9]{6,16}/.test(a)&&(a.length>=6&&a.length<=20)){return true}else{return false}}else{return false}},isPostCode:function(a){if(/^[1-9][0-9]{5}$/.test(a)){return true}else{return false}},isUrl:function(a){if(/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\’:+!]*([^<>\"\"])*$/.test(a)){return true}else{return false}}}});vip.extend({Alert:function(f,b,g,a){var c;if(b==="success"){c="alert-success";if(!g){g="内容保存成功！"}}else{if(b==="fail"){c="alert-danger";if(!g){g="内容保存失败！"}}else{return false}}var d='<div class="alert '+c+'" id="submitSuccess">'+g+"</div>";f.prepend(d);var e=$("#submitSuccess");e.show();setTimeout(function(){e.remove();if(vip.Valid.isFunction(a)){a()}},2500)},CKEditor:{create:function(g,f){var d=f.width,a=f.height,e=f.toolbar,c=f.fullPage,b=f.callBacks;if(!d){d="auto"}if(!a){a="auto"}if(!c){c=false}CKEDITOR.replace(g,{fullPage:c,width:d,height:a,allowedContent:true,extraPlugins:"imagecustom",toolbar:e});if(b){b()}},insert:function(editorName,htm){var oEditor=eval("CKEDITOR.instances."+editorName);if(oEditor.mode=="wysiwyg"){oEditor.insertHtml(htm)}else{alert("Insert Content Error!")}},append:function(editorName,htm){var oEditor=eval("CKEDITOR.instances."+editorName);if(oEditor.mode=="wysiwyg"){var oHtm=oEditor.getData();oEditor.setData(oHtm+htm)}else{alert("Append Content Error!")}},getData:function(editorName){var oEditor=eval("CKEDITOR.instances."+editorName);if(oEditor.mode=="wysiwyg"){var data=oEditor.getData();return data}else{alert("Get Data Error!")}},setData:function(editorName,htm){var oEditor=eval("CKEDITOR.instances."+editorName);if(oEditor.mode=="wysiwyg"){oEditor.setData(htm)}else{alert("Set Data Error!")}}},Clipboard:{init:function(a,b){window.onload=function(){var e,c,d;e=a,c=b.text();d=new ZeroClipboard.Client();d.setHandCursor(true);d.setText(c);d.glue(e[0])}},list:function(a){window.onload=function(){a.each(function(){var c=$(this);txt=c.parents("tr").find('[data-clip="text"]').text();var b=new ZeroClipboard.Client();b.setHandCursor(true);b.setText(txt);b.glue(c[0])})}}},ContentEditable:function(f,d,b){var e=$("#"+f);var c="";e.find("td").css("user-select","none");e.on("dblclick",'[data-role="contenteditable"]',function(){var g=$(this);g.attr("contenteditable",true);g.addClass("editable");g.focus();c=g.text()});e.on("blur",'[data-role="contenteditable"]',function(){var h=$(this),j=h.data("id"),g=h.data("name"),i=h.text();a(h,j,g,i)});$(document).on("keydown",function(j){var h=j.which;if(h==13){var i=$(".editable"),l=i.data("id"),g=i.data("name"),k=i.text();a(i,l,g,k)}});function a(m,h,g,i){m.attr("contenteditable",false);m.removeClass("editable");if(vip.Valid.isExist(i)){var l={},k="a",j=g;var l={id:h},o=g,n=i;l[o]=n;$.post(d,l,function(p){if(p.status===1){if(vip.Valid.isFunction(b)){b()}}else{alert(p.msg)}},"json").error(function(){m.text(c);console.log("接口请求失败！")})}else{m.text(c);console.log("输入内容不存在");return false}}},Dialog:{show:function(g){var e=g.message,d=g.hasShadow,b=g.hasCloseBtn,a=g.autoClose,f=g.delayTime;var c='<div class="modal fade" id="myDialog"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-body">'+e+"</div>";if(b){c+='<div class="modal-footer"><button type="button" class="btn btn-primary btn-sm" onclick="vip.Dialog.hide();">Close</button></div>'}c+="</div></div></div>";if(d){c+='<div class="modal-backdrop in"></div>'}$("body").append(c);$("#myDialog").show().css("opacity",1);if(!f){f=1500}if(a){setTimeout(vip.Dialog.hide,f)}},hide:function(){$("#myDialog, .modal-backdrop").remove()}},Overlay:{show:function(a){$("body").append('<div class="overlay"></div>');if(vip.Valid.isFunction(a)){a()}},hide:function(a){$("body .overlay").remove();if(vip.Valid.isFunction(a)){a()}}},Pager:{init:function(c){var a=c.url,k=c.total,j=c.index,l=c.hasInput,e=3;var d=$(".pagination");var h="";h+='<li><a href="javascript:void(0);" class="page-prev">上一页</a></li>';if(k<=e){for(var g=1;g<=k;g++){if(g===j){h+='<li><a href="javascript:void(0);" class="curr">'+g+"</a></li>"}else{h+='<li><a href="'+a+g+'">'+g+"</a></li>"}}}else{if(k>e){f(j);h+='<li><a href="javascript:void(0);" class="curr">'+j+"</a></li>";b(j)}}h+='<li><a href="javascript:void(0);" class="page-next">下一页</a></li>';d.append(h);d.on("click",".page-prev",function(){if(j===1){return false}else{window.location.href=a+(j-1)}});d.on("click",".page-next",function(){if(j>=k){return false}else{window.location.href=a+(j+1)}});if(l===true){var h="";h+='<div class="pagination-input">跳转到：<input type="text" class="txt" value="" /><input type="button" class="btn" value="GO" /></div>';d.after(h);$(".pagination-input").on("click",".btn",function(){var i=$(".pagination-input .txt").val();if(vip.Valid.isNumber(i)&&i>0&&i<=k){window.location.href=a+i}else{return false}})}function f(m){if(m-e>1){h+='<li><a href="'+a+1+'">'+1+"</a></li>";if((m-e-1)!==1){h+='<li><a href="javascript:void(0);">...</a></li>'}h+='<li><a href="'+a+(m-3)+'">'+(m-3)+"</a></li>",h+='<li><a href="'+a+(m-2)+'">'+(m-2)+"</a></li>";h+='<li><a href="'+a+(m-1)+'">'+(m-1)+"</a></li>"}else{for(var n=1;n<m;n++){h+='<li><a href="'+a+n+'">'+n+"</a></li>"}}}function b(m){if(m+e>=k){for(var n=m+1;n<=k;n++){h+='<li><a href="'+a+n+'">'+n+"</a></li>"}}else{h+='<li><a href="'+a+(m+1)+'">'+(m+1)+"</a></li>",h+='<li><a href="'+a+(m+2)+'">'+(m+2)+"</a></li>",h+='<li><a href="'+a+(m+3)+'">'+(m+3)+"</a></li>";if((m+e+1)!==k){h+='<li><a href="javascript:void(0);">...</a></li>'}h+='<li><a href="'+a+k+'">'+k+"</a></li>"}}}},SeachBox:function(f){var c=this.id=f.id,a=this.url=f.url,k=this.callback=f.callback;var h=$("#"+c);var g;var i={box:h.find(".box"),boxList:h.find(".box ul"),tags:h.find(".tags"),inputText:h.find('[data-role="inputtext"]')};var e=function(n){var l="";for(var m=0;m<n.length;m++){console.log(n[m]);l+="<li>"+n[m].tagvalue+"</li>"}i.boxList.append(l);i.box.show();g=setTimeout(b,2000)};var b=function(){i.box.hide();j()};var j=function(){clearTimeout(g);i.boxList.empty()};var d=function(){h.on("click",".tag",function(){vip.Tags.del($(this))});i.inputText.on("keyup",function(){$.getJSON(a,{brand_name:i.inputText.val()},function(l){j();e(l)})});i.boxList.on("click","li",function(){var o=$(this).text(),n=i.inputText.data("name"),p=n+"-"+o,m=vip.Tags.add(o,n);console.log(p);console.log($('[data-id="'+p+'"]').length);if(!$('[data-id="'+p+'"]').length){i.tags.append(m);if(vip.Valid.isFunction(k)){var l={name:n,id:p,value:o};k(l)}}b()})}()},SeachPanel:{show:function(){vip.Overlay.show(function(){$(".search-panel").show();$(".overlay").on("click",function(){vip.SeachPanel.hide()})})},hide:function(){$(".search-panel").hide();vip.Overlay.hide()},toggle:function(){var a=$(".search-panel");if(a.css("display")==="none"){this.show()}else{this.hide()}}},Slider:function(e){var b=this.id=e.id,c=this.width=e.width,i=this.segment=e.segment,d=this.val=e.val,k=this.callBackFn=e.callBackFn;var l;var g=function(){l=h(100/i);var m=$("#"+b);m.find(".range").append(f());m.find("i").width(l+"%");m.on("click","i",function(p){var o=$(this),n=o.index();if(n===0&&p.offsetX<2){j();return}else{o.addClass("on");o.prevAll().addClass("on");o.nextAll().removeClass("on");d=(n+1)*l}if(vip.Valid.isFunction(k)){k()}p.stopPropagation()});if(c){m.width(c)}if(d>0){a(m.find("i").eq(d/10-1))}else{d=0}}();this.getValue=function(){return d};function a(m){m.addClass("on");m.prevAll().addClass("on");m.nextAll().removeClass("on")}function j(){$("#"+b+" i").removeClass("on")}function h(m){var n=parseFloat(m);if(isNaN(n)){return}n=Math.round(m*100)/100;return n}function f(){var m="";for(var n=0;n<i;n++){m+="<i><b></b></i>"}return m}},Tags:{add:function(a,b){return'<label class="tag">'+a+'<i class="glyphicon glyphicon-remove"></i><input type="hidden" id="'+b+"-"+a+'" value="'+a+'" name="'+b+'[]"></label>'},del:function(a){$(a).remove()}}});